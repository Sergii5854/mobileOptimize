function startBhLoadingAnimation(){$("#loading_overlay").removeClass("hidden"),$("body").css({cursor:"wait"})}function stopBhLoadingAnimation(){$("#loading_overlay").addClass("hidden"),$("body").css({cursor:"default"})}function isInt(n){return+n===n&&!(n%1)}function escape_html(text){return $(document.createElement("div")).text(text).html()}function setMessageHeight(){var header=$("header").height(),editor=$("#writer").height(),WindowHeight=$(window).innerHeight();$("#entries").css("height",WindowHeight-header-editor)}function getUrlParameter(sParam){for(var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split("&"),i=0;i<sURLVariables.length;i++){var sParameterName=sURLVariables[i].split("=");if(sParameterName[0]==sParam)return decodeURIComponent(sParameterName[1])}return null}function isNotPlaceholder(elem,placeholder){var message=$.trim($(elem).html());return message!=placeholder&&message.length}function get_cookie(cookie_name){for(var name=cookie_name+"=",cookie_array=document.cookie.split(";"),i=0;i<cookie_array.length;i++){for(var c=cookie_array[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return null}function set_cookie(cookie_name,cookie_value,expire_seconds){var d=new Date;d.setTime(d.getTime()+1e3*expire_seconds);var expires="";0!=expire_seconds&&(expires="expires="+d.toUTCString()),document.cookie=cookie_name+"="+cookie_value+";"+expires+";path=/"}function localize_dates(){$("div[data-date],span[data-date]").each(function(){var output_str,options=this.dataset.options,message_time=1e3*this.dataset.date,message_date=getDateFragments(new Date(message_time)),date=new Date,now=date.getTime(),current_year=date.getFullYear(),minute_ago=now-6e4,hour_ago=now-36e5,day_ago=now-864e5,week_ago=now-6048e5,yesterday_midnight=new Date(date.setDate(date.getDate()-1)).setHours(0,0,0,0);"no_time"!=options&&(message_time>minute_ago?output_str="just now":message_time>hour_ago?output_str=Math.round((now-message_time)/60/1e3)+" minute"+(Math.round((now-message_time)/60/1e3)<2?"":"s")+" ago":message_time>day_ago?output_str=Math.round((now-message_time)/60/60/1e3)+" hours ago":message_time<day_ago&&(message_time>week_ago?(output_str=message_time>yesterday_midnight?"Yesterday":Math.round((now-message_time)/24/60/60/1e3)+" days ago",output_str+=" at "+message_date.hour12+":"+message_date.minutes2d+message_date.period):(output_str=message_date.month_name+" "+message_date.date,message_date.year!==current_year&&(output_str+=", "+message_date.year))),$(this).html(output_str))})}function reset_form_buttons(form){$("button",form).attr("disabled",!1),$("button",form).removeClass("loading"),$("body").css("cursor","default")}function setIosDeviceToken(){return!1}function prepVideoControls(){$(".toggle-controls").each(function(){var playButton$=$(this).find("i"),video=$(this).find("video").get(0);playButton$.show(),video.onended=function(){playButton$.show(),video.removeAttribute("controls")},video.onclick=function(){this.paused?this.play():this.pause()},$(this).on("mouseover mouseout touchstart",function(e){$(video).attr("controls")?($(video).attr("controls",!1),video.paused&&playButton$.show()):($(video).attr("controls",!0),playButton$.hide())})})}function hide_spinner(){$(".loading-spinner").hide()}function get_formatted_time2(date,return_data){return getDateFragments(get_date_from_saved_offset(date))[return_data]}function getDateFragments(d){var days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day=days[d.getDay()],year=d.getFullYear(),months=["January","February","March","April","May","June","July","August","September","October","November","December"],month=d.getMonth()+1,month_name=months[d.getMonth()],date=d.getDate(),hour24=d.getHours(),hour12=hour24>12?hour24-12:hour24,hour12=0==hour12?12:hour12,minutes=d.getMinutes(),minutes2d=1==minutes.toString().length?"0"+minutes:minutes,period=hour24>=12?"pm":"am",timezone_match=d.toString().match(/\(([A-Za-z\s].*)\)/);return{day:day,month:month,month_name:month_name,year:year,date:date,hour24:hour24,hour12:hour12,minutes:minutes,minutes2d:minutes2d,period:period,string:day+" "+month+"/"+date+" at "+hour12+":"+minutes2d+period+" "+(timezone_match&&timezone_match.length?timezone_match[1]:""),string2:month_name+" "+date+", "+year+" at "+hour12+":"+minutes2d+period,string3:month+"/"+date+"/"+year.toString().substr(2)+" "+hour12+":"+minutes2d+period,offset:d.getTimezoneOffset()}}function is_email(email){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email)}function zeropad(number){return parseInt(number)<10?"0"+number:number.toString()}function capitalize_first_letter(string){return string.charAt(0).toUpperCase()+string.slice(1)}"function"!=typeof Promise&&function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k="function"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0==--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);var showPopup=!0;if(2==page_info.default_language_id)var PLACEHOLDER="Escribe un mensaje...";else var PLACEHOLDER="Write a message...";String.prototype.includes||(String.prototype.includes=function(search,start){"use strict";return"number"!=typeof start&&(start=0),!(start+search.length>this.length)&&-1!==this.indexOf(search,start)}),function(){"use strict";function d(s){return decodeURIComponent(s.replace(/\+/g," "))}for(var match,params={},r=/([^&=]+)=?([^&]*)/g,search=window.location.search;match=r.exec(search.substring(1));)params[d(match[1])]=d(match[2]),"true"!==d(match[2])&&"false"!==d(match[2])||(params[d(match[1])]="true"===d(match[2]));window.params=params}(),$(document).ready(function(){!function($){$.extend({playSound:function(){return $("<embed src='"+arguments[0]+".mp3' hidden='true' autostart='true' loop='false' class='playSound'><audio autoplay='autoplay' style='display:none;' controls='controls'><source src='"+arguments[0]+".mp3' /><source src='"+arguments[0]+".ogg' /></audio>").appendTo("body")}})}(jQuery),$(".bubble-announce").find(".close").click(function(){$(this).parent().fadeOut(500)}),localize_dates(),$("form").submit(function(e){$(".alert").not(".draft, .note, .counselor, .client, #next-errors").hide(),$("body").css("cursor","wait"),$(".error").removeClass("error"),$(".has-error").removeClass("has-error"),$("button",this).attr("disabled","disabled"),$("button",this).addClass("loading")}),$(".mobilemenu-toggle").on("touchstart click",function(event){event.stopPropagation(),event.preventDefault(),$("#counseling-menu").hide(),$.when($("header > div.menu").toggle()).done(),setMessageHeight(),$(this).find(".fa").toggleClass("fa-bars").toggleClass("fa-times"),$("#counselingmenu-toggle").removeClass("active"),$("#inpageMenu").is(":visible")&&($("#inpageMenu").toggle(),$("#appMenu #page-title").toggleClass("active")),$("#change-counselor-bubble").is(":visible")&&$("#change-counselor-bubble").remove()}),$("#counselingmenu-toggle").on("click",function(){$("header > div.menu").hide(),$.when($("#counseling-menu").toggle()).done(),setMessageHeight(),$(this).toggleClass("active"),$(".mobilemenu-toggle .fa").removeClass("fa-bars").removeClass("fa-times").addClass("fa-bars")});var helpmenu=!1,username=!1;$("#helpmenu").on("click",function(){helpmenu?($("#helpmenu").removeClass("open"),helpmenu=!1):($("#helpmenu").addClass("open"),helpmenu=!0)}),$("#username").on("click",function(){username?($("#username").removeClass("open"),username=!1):($("#username").addClass("open"),username=!0)});var isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);$("#helpmenu").length&&!isIOS&&$(document).on("click",function(){!$("#helpmenu").is(":hover")&&helpmenu&&($("#helpmenu").removeClass("open"),helpmenu=!1),!$("#username").is(":hover")&&username&&($("#username").removeClass("open"),username=!1)}),$(".menu > ul > li").on("click",function(){$.when($(this).toggleClass("mobile-active")).done(setMessageHeight())}),$(window).resize(function(){$("header").hasClass("is_app")||($(window).width()>767?("block"==$("header > div.menu").css("display")&&$(".mobilemenu-toggle .fa").removeClass("fa-bars").removeClass("fa-times").addClass("fa-bars"),$("header > div.menu").css("display","inline"),$("#username").removeClass("open").removeClass("mobile-active"),$("#helpmenu").removeClass("open").removeClass("mobile-active")):("inline"==$("header > div.menu").css("display")&&($("header > div.menu").css("display","none"),$(".mobilemenu-toggle .fa").removeClass("fa-bars").removeClass("fa-times").addClass("fa-bars")),$("#username").removeClass("open").removeClass("mobile-active"),$("#helpmenu").removeClass("open").removeClass("mobile-active")))}),$("#permission").change(function(){$("#submit-button").toggleClass("disabled"),$("#submit-button").hasClass("disabled")?$("#submit-button").prop("disabled",!0):$("#submit-button").prop("disabled",!1)}),$("header #page-title").on("touchstart click",function(event){event.stopPropagation(),event.preventDefault(),$("#inpageMenu").toggle(),$("#appMenu #page-title").toggleClass("active"),$("header > div.menu").hide(),$(".mobilemenu-toggle .fa").removeClass("fa-bars").removeClass("fa-times").addClass("fa-bars"),setMessageHeight()}),$("#inpageMenu > ul > a").on("click",function(){$("#inpageMenu").toggle(),$("#appMenu #page-title").toggleClass("active")}),$("#content-container").on("click",function(event){$("#inpageMenu").is(":visible")&&($("#inpageMenu").toggle(),$("#appMenu #page-title").toggleClass("active"))}),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?$("video").attr("controls",!0):$(".modal").find(".toggle-controls").length?$(".modal").on("shown.bs.modal",prepVideoControls):prepVideoControls(),$("#modal-opt-in").length&&($("#modal-opt-in").modal({show:!0,keyboard:!1,backdrop:"static"}),$("#consent_checkbox").click(function(){$("#consent_opt_in").attr("disabled",!this.checked)}),$("#consent_opt_in").click(function(){set_cookie("gdpr_cookie_consent_given","yes",63072e4),window.location=window.location}))}),$(".container").hasClass("bg-gray")&&($("#body-container").addClass("gray"),$("#content-container").addClass("gray"),$("footer").addClass("white"),$("footer #upperbar").addClass("gray"),$("footer #lowerbar").addClass("white"));var mobile_notification=function(html){if($(window).width>=768)return!1;var container=$("#notification"),content=$("<p>").html(html),dismiss=$("<button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>");return container.html("").append(dismiss),dismiss.on("click",function(){container.slideUp().hide()}),$(document).on("click","#notification a",function(){container.slideUp().hide()}),container.insertAfter("header").append(content).slideDown(),container};!function($){$.fn.popOnExit=function(options){var $element=this,lastClientY=0,maxClientY=0,options=options||{},modal_name=$element.attr("id"),cookie_name="exit_modal_shown:"+$element.attr("id"),times_shown=parseInt(get_cookie(cookie_name))||0,defaults={limit:2,modalBackdrop:!0,modalKeyboard:!0};for(var i in defaults)"undefined"==typeof options[i]&&(options[i]=defaults[i]);var showModal=function(options){times_shown<options.limit&&(showPopup==undefined||1==showPopup)&&$element.modal({backdrop:options.modalBackdrop,keyboard:options.modalKeyboard,show:!0})},onMouseMove=function(e){lastClientY>0&&lastClientY>e.clientY&&e.clientY<=10&&showModal(options),lastClientY=e.clientY},onScroll=function(e){window.scrollY<lastClientY&&window.scrollY<maxClientY-150&&showModal(options),lastClientY=window.scrollY,maxClientY=lastClientY>maxClientY?lastClientY:maxClientY};return $element.on("shown.bs.modal",function(){times_shown++,set_cookie(cookie_name,times_shown,86400),mixpanel&&mixpanel.track("shown_exit_modal",{exit_modal:modal_name+($element.attr("data-variant")?"-"+$element.attr("data-variant"):"")})}),page_info.is_mobile?(document.addEventListener("touchmove",onScroll,!1),document.addEventListener("scroll",onScroll,!1)):document.addEventListener("mousemove",onMouseMove,!1),$element}}(jQuery);
//# sourceMappingURL=everywhere.map